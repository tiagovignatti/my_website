<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="robots" content="noodp" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge, chrome=1">
        <title>Cursor&#39;s update inside kernel only - Tiago Vignatti</title><meta name="Description" content=""><meta property="og:title" content="Cursor&#39;s update inside kernel only" />
<meta property="og:description" content="One thing that I learned with open communities is when you send a proposal idea and no one replies. This seems to be odd at first but it isn&rsquo;t. If you did something strange or wrong then at least someone will reply. OTOH if you did something that can be promiser and no one objects, then great! 99% that you did something interesting :)
Given that I&rsquo;ll not work towards this cursor&rsquo;s shortcut idea soon, I&rsquo;m posting a mail that I recently sent to dri list and didn&rsquo;t see much excitement there." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://tiagovignatti.github.io/my_website/posts/cursors-update-inside-kernel-only/" />
<meta property="article:published_time" content="2009-01-14T22:48:44+00:00" />
<meta property="article:modified_time" content="2009-01-14T22:48:44+00:00" />
<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Cursor&#39;s update inside kernel only"/>
<meta name="twitter:description" content="One thing that I learned with open communities is when you send a proposal idea and no one replies. This seems to be odd at first but it isn&rsquo;t. If you did something strange or wrong then at least someone will reply. OTOH if you did something that can be promiser and no one objects, then great! 99% that you did something interesting :)
Given that I&rsquo;ll not work towards this cursor&rsquo;s shortcut idea soon, I&rsquo;m posting a mail that I recently sent to dri list and didn&rsquo;t see much excitement there."/>
<meta name="application-name" content="Tiago Vignatti">
<meta name="apple-mobile-web-app-title" content="Tiago Vignatti"><link rel="shortcut icon" type="image/x-icon" href="https://tiagovignatti.github.io/my_website/favicon.ico" />
        <link rel="icon" type="image/png" sizes="32x32" href="https://tiagovignatti.github.io/my_website/favicon-32x32.png">
        <link rel="icon" type="image/png" sizes="16x16" href="https://tiagovignatti.github.io/my_website/favicon-16x16.png"><link rel="apple-touch-icon" sizes="180x180" href="https://tiagovignatti.github.io/my_website/apple-touch-icon.png"><link rel="manifest" href="https://tiagovignatti.github.io/my_website/site.webmanifest"><link rel="canonical" href="https://tiagovignatti.github.io/my_website/posts/cursors-update-inside-kernel-only/" /><link rel="prev" href="https://tiagovignatti.github.io/my_website/posts/multiseat-documentation-and-references/" /><link rel="next" href="https://tiagovignatti.github.io/my_website/posts/personal-news/" /><link rel="stylesheet" href="/my_website/lib/normalize/normalize.min.css"><link rel="stylesheet" href="/my_website/css/style.min.css"><link rel="stylesheet" href="/my_website/lib/fontawesome-free/all.min.css"><link rel="stylesheet" href="/my_website/lib/animate/animate.min.css"><script type="application/ld+json">
    {
        "@context": "http://schema.org",
        "@type": "BlogPosting",
        "headline": "Cursor's update inside kernel only",
        "inLanguage": "en",
        "mainEntityOfPage": {
            "@type": "WebPage",
            "@id": "https:\/\/tiagovignatti.github.io\/my_website\/posts\/cursors-update-inside-kernel-only\/"
        },"genre": "posts","wordcount":  352 ,
        "url": "https:\/\/tiagovignatti.github.io\/my_website\/posts\/cursors-update-inside-kernel-only\/","datePublished": "2009-01-14T22:48:44+00:00","dateModified": "2009-01-14T22:48:44+00:00","publisher": {
            "@type": "Organization",
            "name": "Author"},"author": {
                "@type": "Person",
                "name": "Author"
            },"description": ""
    }
    </script></head>
    <body header-desktop="" header-mobile=""><script type="text/javascript">(window.localStorage && localStorage.getItem('theme') ? localStorage.getItem('theme') === 'dark' : ('' === 'auto' ? window.matchMedia('(prefers-color-scheme: dark)').matches : '' === 'dark')) && document.body.setAttribute('theme', 'dark');</script>

        <div id="mask"></div><div class="wrapper"><header class="desktop" id="header-desktop">
    <div class="header-wrapper">
        <div class="header-title">
            <a href="/my_website/" title="Tiago Vignatti">Tiago Vignatti</a>
        </div>
        <div class="menu">
            <div class="menu-inner"><a class="menu-item" href="/my_website/"> Blog </a><a class="menu-item" href="/my_website/about/"> About </a><span class="menu-item delimiter"></span><a href="javascript:void(0);" class="menu-item theme-switch" title="Switch Theme">
                    <i class="fas fa-adjust fa-fw"></i>
                </a>
            </div>
        </div>
    </div>
</header><header class="mobile" id="header-mobile">
    <div class="header-container">
        <div class="header-wrapper">
            <div class="header-title">
                <a href="/my_website/" title="Tiago Vignatti">Tiago Vignatti</a>
            </div>
            <div class="menu-toggle" id="menu-toggle-mobile">
                <span></span><span></span><span></span>
            </div>
        </div>
        <div class="menu" id="menu-mobile"><a class="menu-item" href="/my_website/" title="">Blog</a><a class="menu-item" href="/my_website/about/" title="">About</a><a href="javascript:void(0);" class="menu-item theme-switch" title="Switch Theme">
                <i class="fas fa-adjust fa-fw"></i>
            </a></div>
    </div>
</header>
<div class="search-dropdown desktop">
    <div id="search-dropdown-desktop"></div>
</div>
<div class="search-dropdown mobile">
    <div id="search-dropdown-mobile"></div>
</div>
<main class="main">
                <div class="container"><div class="toc" id="toc-auto">
            <h2 class="toc-title">Contents</h2>
            <div class="toc-content" id="toc-content-auto"></div>
        </div><article class="page single"><h1 class="single-title animated flipInX">Cursor&#39;s update inside kernel only</h1><div class="post-meta">
            <div class="post-meta-line">&nbsp;<span class="post-category">included in <a href="/my_website/categories/computing/"><i class="far fa-folder fa-fw"></i>Computing</a></span></div>
            <div class="post-meta-line"><i class="far fa-calendar-alt fa-fw"></i>&nbsp;<time datetime="2009-01-14">2009-01-14</time>&nbsp;<i class="fas fa-pencil-alt fa-fw"></i>&nbsp;352 words&nbsp;
                <i class="far fa-clock fa-fw"></i>&nbsp;2 minutes&nbsp;</div>
        </div><div class="details toc" id="toc-static"  kept="">
                <div class="details-summary toc-title">
                    <span>Contents</span>
                    <span><i class="details-icon fas fa-angle-right"></i></span>
                </div>
                <div class="details-content toc-content" id="toc-content-static"><nav id="TableOfContents"></nav></div>
            </div><div class="content" id="content"><p>One thing that I learned with open communities is when you send a proposal idea and no one replies. This seems to be odd at first but it <em>isn&rsquo;t</em>. If you did something strange or wrong then at least someone will reply. OTOH if you did something that can be promiser <em>and</em> no one objects, then great! 99% that you did something interesting :)</p>
<p>Given that I&rsquo;ll not work towards this cursor&rsquo;s shortcut idea soon, I&rsquo;m posting a mail that I <a href="http://www.mail-archive.com/dri-devel@lists.sourceforge.net/msg37437.html" target="_blank" rel="noopener noreffer">recently sent</a> to dri list and didn&rsquo;t see much excitement there. So the bits are preserved here for future references.</p>
<hr>
<p>Under KMS, we can build a feature to update the cursor directly to screen without the continuous intervention of the userspace application (X server, wayland, etc). It&rsquo;s a fastpath for DRM based cursors obtained by short-circuit the kernel input layer and DRM module. This would solve <a href="http://vignatti.wordpress.com/2008/07/29/improving-input-latency/" target="_blank" rel="noopener noreffer">all cursor&rsquo;s latency issues</a> that we have in our current model.</p>
<p>This series of patches implement such feature using Xorg as the application. Through an ioctl, Xorg tells which devices are responsible for cursors' updates and the kernel evdev driver will spit the events to DRM. DRM will take care about the event informations and also screen limits, and then will draw the cursor on screen. Very intuitive.</p>
<p>Right now a thing that is annoying me is how others cursors, sw rendered, could be implemented. I want to avoid two different sets of the same code in different contexts. IMHO conceptually all these cursor update things must be in-kernel. Painting a cursor image seems to be quite hard as we have to save/restore areas under the cursor. I remember that anholt had an idea concerning this, but I do not remember details.</p>
<p>Well, the patches are far from ready to go upstream, but it deploys a system working on this way. So, for now, this mail has two goals:</p>
<ul>
<li>to people comment on and see in what kind of world we can move.</li>
<li>get a feedback how we can proceed in the case of sw cursors.</li>
</ul>
<p>Please, comment on. The patches can be found <a href="http://people.freedesktop.org/~vignatti/code/drmcursor/" target="_blank" rel="noopener noreffer">here</a>.</p>
</div><div class="post-footer" id="post-footer">
    <div class="post-info">
        <div class="post-info-line">
            <div class="post-info-mod">
                <span>Updated on 2009-01-14</span>
            </div>
            <div class="post-info-license"></div>
        </div>
        <div class="post-info-line">
            <div class="post-info-md"></div>
            <div class="post-info-share">
                <span></span>
            </div>
        </div>
    </div>

    <div class="post-info-more">
        <section class="post-tags"></section>
        <section>
            <span><a href="javascript:void(0);" onclick="window.history.back();">Back</a></span>&nbsp;|&nbsp;<span><a href="/my_website/">Home</a></span>
        </section>
    </div>

    <div class="post-nav"><a href="/my_website/posts/multiseat-documentation-and-references/" class="prev" rel="prev" title="multiseat - documentation and references"><i class="fas fa-angle-left fa-fw"></i>multiseat - documentation and references</a>
            <a href="/my_website/posts/personal-news/" class="next" rel="next" title="personal news">personal news<i class="fas fa-angle-right fa-fw"></i></a></div>
</div>
</article></div>
            </main><footer class="footer">
        <div class="footer-container"><div class="footer-line">Powered by <a href="https://gohugo.io/" target="_blank" rel="noopener noreffer" title="Hugo 0.80.0">Hugo</a> | Theme - <a href="https://github.com/dillonzq/LoveIt" target="_blank" rel="noopener noreffer" title="LoveIt 0.2.10"><i class="far fa-kiss-wink-heart fa-fw"></i> LoveIt</a>
                </div><div class="footer-line"><i class="far fa-copyright fa-fw"></i><span itemprop="copyrightYear">2021</span><span class="author" itemprop="copyrightHolder">&nbsp;<a href="/my_website/" target="_blank"></a></span></div>
        </div>
    </footer></div>

        <div id="fixed-buttons"><a href="#" id="back-to-top" class="fixed-button" title="Back to Top">
                <i class="fas fa-arrow-up fa-fw"></i>
            </a><a href="#" id="view-comments" class="fixed-button" title="View Comments">
                <i class="fas fa-comment fa-fw"></i>
            </a>
        </div><script type="text/javascript" src="/my_website/lib/smooth-scroll/smooth-scroll.min.js"></script><script type="text/javascript" src="/my_website/lib/lazysizes/lazysizes.min.js"></script><script type="text/javascript" src="/my_website/lib/clipboard/clipboard.min.js"></script><script type="text/javascript">window.config={"code":{"copyTitle":"Copy to clipboard","maxShownLines":10},"comment":{}};</script><script type="text/javascript" src="/my_website/js/theme.min.js"></script><script type="text/javascript">
            window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments);}gtag('js', new Date());
            gtag('config', 'G-C1XH4SJP6N', { 'anonymize_ip': true });
        </script><script type="text/javascript" src="https://www.googletagmanager.com/gtag/js?id=G-C1XH4SJP6N" async></script></body>
</html>
